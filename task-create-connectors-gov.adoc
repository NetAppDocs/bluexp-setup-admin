---
sidebar: sidebar
permalink: task-create-connectors-gov.html
keywords: government region, gov, govcloud, connector
summary: If you are operating in a Government region, you need to deploy a Connector from your cloud provider's marketplace or by using the manual installation method. You can't deploy the Connector in a Government region from BlueXP's SaaS website.
---

= Deploy the Connector
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]


If you are operating in a Government region, you need to deploy a Connector from your cloud provider's marketplace or by manually installing the Connector software on an existing Linux host. You can't deploy the Connector in a Government region from BlueXP's SaaS website.

== Overview

Use one of the following links to view instructions for creating a Connector:

* link:task-launching-aws-mktp.html#create-the-connector-in-an-aws-government-region[Create a Connector from the AWS Marketplace]
* https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-getting-started-aws-c2s.html[Create a Connector and Cloud Volumes ONTAP in the AWS C2S environment^]
* link:task-launching-azure-mktp.html[Create a Connector from the Azure Marketplace]
* link:task-installing-linux.html[Install a Connector on your own Linux host]
+
For manual installations on your own Linux host, you must use the "online" installer to install the Connector on a host that has internet access. A separate "offline" installer is available for the Connector, but it's only supported with on-prem sites that don't have internet access. It's not supported with Government regions.

After you deploy the Connector, you can access BlueXP by opening your web browser and connecting to the IP address of the Connector instance: https://_ipaddress_

Since the Connector was deployed in a Government region, it's not accessible from https://console.bluexp.netapp.com.

link:concept-connectors.html[Learn about other ways to deploy a Connector].

== Verify host requirements

The Connector software must run on a host that meets specific operating system requirements, RAM requirements, port requirements, and so on.

A dedicated host is required::
The Connector is not supported on a host that is shared with other applications. The host must be a dedicated host.

CPU:: 4 cores or 4 vCPUs

RAM:: 14 GB

AWS EC2 instance type::
An instance type that meets the CPU and RAM requirements above. We recommend t3.xlarge.

Azure VM size::
An instance type that meets the CPU and RAM requirements above. We recommend DS3 v2.

GCP machine type::
An instance type that meets the CPU and RAM requirements above. We recommend n2-standard-4.
+
The Connector is supported in Google Cloud on a VM instance with an OS that supports https://cloud.google.com/compute/shielded-vm/docs/shielded-vm[Shielded VM features^]

Supported operating systems::
* CentOS 7.6
* CentOS 7.7
* CentOS 7.8
* CentOS 7.9
* Red Hat Enterprise Linux 7.6
* Red Hat Enterprise Linux 7.7
* Red Hat Enterprise Linux 7.8
* Red Hat Enterprise Linux 7.9
* Red Hat Enterprise Linux 8.6
+
The Red Hat Enterprise Linux system must be registered with Red Hat Subscription Management. If it is not registered, the system cannot access repositories to update required 3rd party software during Connector installation.
+
The Connector is supported on English-language versions of these operating systems.

Hypervisor::
A bare metal or hosted hypervisor that is certified to run CentOS or Red Hat Enterprise Linux
https://access.redhat.com/certified-hypervisors[Red Hat Solution: Which hypervisors are certified to run Red Hat Enterprise Linux?^]

Disk space in /opt:: 100 GiB of space must be available

Disk space in /var:: 20 GiB of space must be available

Docker Engine:: Docker Engine version 19.3.1 or later is required on the host before you install the Connector. https://docs.docker.com/engine/install/[View installation instructions^]

Outbound internet access::
The installer for the Connector must access the following URLs during the installation process:
+
* \https://support.netapp.com
* \https://mysupport.netapp.com
* \https://cloudmanager.cloud.netapp.com/tenancy
* \https://stream.cloudmanager.cloud.netapp.com
* \https://cloudmanagerinfraprod.azurecr.io
* \https://production-artifacts.cloudmanager.cloud.netapp.com
* \https://*.blob.core.windows.net

+
The host might try to update operating system packages during installation. The host can contact different mirroring sites for these OS packages.

== Install the Connector

After you verify that you have a supported Linux host, you can obtain the Connector software and then install it.

NOTE: If you want to create a Cloud Volumes ONTAP system in Google Cloud, then you must have a Connector that's running in Google Cloud as well. You can't use a Connector that's running in AWS, Azure, or on-prem.

// start tabbed area

[role="tabbed-block"]
====

.AWS Gov Marketplace
--
To deploy the Connector in an AWS Government region, you need to go to the EC2 service and select the BlueXP offering from the AWS Marketplace.

.Steps

. Set up permissions in AWS:

.. From the IAM console, create your own policy by copying and pasting the contents of link:reference-permissions-aws.html[the IAM policy for the Connector].

.. Create an IAM role with the role type Amazon EC2 and attach the policy that you created in the previous step to the role.

. Go to the BlueXP offering in the AWS Marketplace.
+
The IAM user must have AWS Marketplace permissions to subscribe and unsubscribe.

.. Open the EC2 service and select *Launch instance*.
.. Select *AWS Marketplace*.
.. Search for BlueXP and select the offering.
+
image:screenshot-gov-cloud-mktp.png[A screenshot that shows the BlueXP offering after searching for it in the AWS Marketplace]

.. Click *Continue*.

. Follow the prompts to configure and deploy the instance:

* *Choose an Instance Type*: Depending on region availability, choose one of the supported instance types (t3.xlarge is recommended).
+
link:task-installing-linux.html[Review the instance requirements].

* *Configure Instance Details*: Select a VPC and subnet, choose the IAM role that you created in step 1, enable termination protection (recommended), and choose any other configuration options that meet your requirements.
+
image:screenshot_aws_iam_role.gif[A screenshot that shows fields on the Configure Instance page in AWS. The IAM role that you should have created in step 1 is selected.]

* *Add Storage*: Keep the default storage options.

* *Add Tags*: Enter tags for the instance, if desired.

* *Configure Security Group*: Specify the required connection methods for the Connector instance: SSH, HTTP, and HTTPS.

* *Review*: Review your selections and click *Launch*.

+
AWS launches the software with the specified settings. The Connector instance and software should be running in approximately five minutes.

. Open a web browser from a host that has a connection to the Connector instance and enter the following URL:
+
https://_ipaddress_

. After you log in, set up the Connector:
.. Specify the NetApp account to associate with the Connector.
+
link:concept-netapp-accounts.html[Learn about NetApp accounts].
.. Enter a name for the system.
--

.Azure Gov Marketplace
--
.Steps

. Go to the NetApp Connector VM page in the Azure Marketplace.
+
* https://azuremarketplace.microsoft.com/en-us/marketplace/apps/netapp.netapp-oncommand-cloud-manager[Azure Marketplace page for commercial regions^]
* https://portal.azure.us/#create/netapp.netapp-oncommand-cloud-manageroccm-byol[Azure Marketplace page for Azure Government regions^]

. Click *Get it now* and then click *Continue*.

. From the Azure portal, click *Create* and follow the steps to configure the virtual machine.
+
Note the following as you configure the VM:

* The Connector can perform optimally with either HDD or SSD disks.

* Choose a VM size that meets CPU and RAM requirements. We recommend DS3 v2.
+
link:task-installing-linux.html[Review the VM requirements].

* For the network security group, the Connector requires inbound connections using SSH, HTTP, and HTTPS.
+
link:reference-ports-azure.html[Learn more about security group rules for the Connector].

* Under *Management*, enable *System assigned managed identity* for the Connector by selecting *On*.
+
This setting is important because a managed identity allows the Connector virtual machine to identify itself to Azure Active Directory without providing any credentials. https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview[Learn more about managed identities for Azure resources^].

. On the *Review + create* page, review your selections and click *Create* to start the deployment.
+
Azure deploys the virtual machine with the specified settings. The virtual machine and Connector software should be running in approximately five minutes.

. Open a web browser from a host that has a connection to the Connector virtual machine and enter the following URL:
+
https://_ipaddress_

. After you log in, set up the Connector:
.. Specify the NetApp account to associate with the Connector.
+
link:concept-netapp-accounts.html[Learn about NetApp accounts].
.. Enter a name for the system.

.Result

The Connector is now installed and set up with your NetApp account.

If the Connector is in an Azure commercial region, open a web browser and go to https://console.bluexp.netapp.com to start using the Connector with BlueXP.

If the Connector is in an Azure Government region, you can use BlueXP by opening your web browser and connecting to the IP address of the Connector instance: https://_ipaddress_

Since the Connector was deployed in a Government region, it's not accessible from https://console.bluexp.netapp.com.
--

.Manual install
--
.What you'll need

* Root privileges to install the Connector.

* Details about a proxy server, if a proxy is required for internet access from the Connector.
+
You have the option to configure a proxy server after installation but doing so requires restarting the Connector.

* A CA-signed certificate, if the proxy server uses HTTPS.

.About this task

* The installation installs the AWS command line tools (awscli) to enable recovery procedures from NetApp support.
+
If you receive a message that installing the awscli failed, you can safely ignore the message. The Connector can operate successfully without the tools.

* The installer that is available on the NetApp Support Site might be an earlier version. After installation, the Connector automatically updates itself if a new version is available.

.Steps

. Verify that docker is enabled and running.
+
[source,cli]
sudo systemctl enable docker && sudo systemctl start docker

. Download the Connector software from the https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab[NetApp Support Site^], and then copy it to the Linux host.
+
You should download the Connector installer that's meant for use in your network or in the cloud.

. Assign permissions to run the script.
+
[source,cli]
chmod +x OnCommandCloudManager-V3.9.23

. Run the installation script.
+
[source,cli]
 ./OnCommandCloudManager-V3.9.23 --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
+
The --proxy and --cacert parameters are optional. If you have a proxy server, you will need to enter the parameter(s) as shown. The installer doesn't prompt you to provide information about a proxy.
+
Here's an example of the command using both optional parameters:
+
[source,cli]
 ./OnCommandCloudManager-V3.9.23 --proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
+
--proxy configures the Connector to use an HTTP or HTTPS proxy server using one of the following formats:
+
* \http://address:port
* \http://username:password@address:port
* \https://address:port
* \https://username:password@address:port

+
--cacert specifies a CA-signed certificate to use for HTTPS access between the Connector and the proxy server. This parameter is required only if you specify an HTTPS proxy server.
--

.Result

The Connector is now installed. At the end of the installation, the Connector service (occm) restarts twice if you specified a proxy server.

== Set up BlueXP

Sign up or log in and then set up the Connector to work with your account.

.Steps

. Open a web browser and enter the following URL:
+
https://_ipaddress_
+
_ipaddress_ can be localhost, a private IP address, or a public IP address, depending on the configuration of the host. For example, if the Connector is in the public cloud without a public IP address, you must enter a private IP address from a host that has a connection to the Connector host.

. Sign up or log in.

. After you log in, set up BlueXP:
.. Specify the NetApp account to associate with the Connector.
+
link:concept-netapp-accounts.html[Learn about NetApp accounts].
.. Enter a name for the system.

.Result

The Connector is now installed and set up with your NetApp account. BlueXP will automatically use this Connector when you create new working environments.