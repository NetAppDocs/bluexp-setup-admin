---
sidebar: sidebar
permalink: reference-permissions-aws.html
keywords: permissions, actions, aws, aws permissions
summary: Cloud Manager requires permissions to perform actions in your cloud provider. These permissions are included in the policies provided by NetApp. You might want to understand what Cloud Manager does with these permissions.
---

= Required permissions for the Connector in AWS
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Cloud Manager requires permissions to perform actions in your cloud provider. These permissions are included in https://mysupport.netapp.com/site/info/cloud-manager-policies[the policies provided by NetApp^]. You might want to understand what Cloud Manager does with these permissions.

The following sections describe how the permissions are used for each NetApp cloud service. This information can be helpful if your corporate policies dictate that permissions are only provided as needed.

== AppTemplate tags

The Connector makes the following API requests to manage tags on AWS resources when you use the AppTemplate Tagging service:

* ec2:CreateTags
* ec2:DeleteTags
* ec2:DescribeTags
* tag:getResources
* tag:getTagKeys
* tag:getTagValues
* tag:TagResources
* tag:UntagResources

== Cloud Backup

The Connector makes the following API requests to deploy the restore instance for Cloud Backup:

* ec2:StartInstances
* ec2:StopInstances
* ec2:DescribeInstances
* ec2:DescribeInstanceStatus
* ec2:RunInstances
* ec2:TerminateInstances
* ec2:DescribeInstanceAttribute
* ec2:DescribeImages
* ec2:CreateTags
* ec2:CreateVolume
* ec2:CreateSecurityGroup
* ec2:DescribeSubnets
* ec2:DescribeVpcs
* ec2:DescribeRegions
* cloudformation:CreateStack
* cloudformation:DeleteStack
* cloudformation:DescribeStacks

The Connector makes the following API requests to manage backups in Amazon S3:

* s3:GetBucketLocation
* s3:ListAllMyBuckets
* s3:ListBucket
* s3:CreateBucket
* s3:GetLifecycleConfiguration
* s3:PutLifecycleConfiguration
* s3:PutBucketTagging
* s3:ListBucketVersions
* s3:GetBucketAcl
* s3:PutBucketPublicAccessBlock
* kms:List*
* kms:Describe*
* s3:GetObject
* ec2:describeVpcEndpoints
* kms:ListAliases
* s3:PutEncryptionConfiguration

The Connector makes the following API requests when you use the Search & Restore method to restore volumes and files:

* s3:CreateBucket
* s3:DeleteObject
* s3:DeleteObjectVersion
* s3:GetBucketAcl
* s3:ListBucket
* s3:ListBucketVersions
* s3:ListBucketMultipartUploads
* s3:PutObject
* s3:PutBucketAcl
* s3:PutLifecycleConfiguration
* s3:PutBucketPublicAccessBlock
* s3:AbortMultipartUpload
* s3:ListMultipartUploadParts
* athena:StartQueryExecutionc
* athena:GetQueryResults
* athena:GetQueryExecution
* athena:StopQueryExecution
* glue:CreateDatabase
* glue:CreateTable
* glue:BatchDeletePartition

== Cloud Data Sense

The Connector makes the following API requests to deploy the Cloud Data Sense instance:

* ec2:DescribeInstances
* ec2:DescribeInstanceStatus
* ec2:RunInstances
* ec2:TerminateInstances
* ec2:CreateTags
* ec2:CreateVolume
* ec2:AttachVolume
* ec2:CreateSecurityGroup
* ec2:DeleteSecurityGroup
* ec2:DescribeSecurityGroups
* ec2:CreateNetworkInterface
* ec2:DescribeNetworkInterfaces
* ec2:DeleteNetworkInterface
* ec2:DescribeSubnets
* ec2:DescribeVpcs
* ec2:CreateSnapshot
* ec2:DescribeRegions
* cloudformation:CreateStack
* cloudformation:DeleteStack
* cloudformation:DescribeStacks
* cloudformation:DescribeStackEvents
* iam:AddRoleToInstanceProfile
* ec2:AssociateIamInstanceProfile
* ec2:DescribeIamInstanceProfileAssociations

The Connector makes the following API requests to scan S3 buckets when you use Cloud Data Sense:

* iam:AddRoleToInstanceProfile
* ec2:AssociateIamInstanceProfile
* ec2:DescribeIamInstanceProfileAssociations
* s3:GetBucketTagging
* s3:GetBucketLocation
* s3:ListAllMyBuckets
* s3:ListBucket
* s3:GetBucketPolicyStatus
* s3:GetBucketPolicy
* s3:GetBucketAcl
* s3:GetObject
* iam:GetRole
* s3:DeleteObject
* s3:DeleteObjectVersion
* s3:PutObject
* sts:AssumeRole

== Cloud Tiering

The Connector makes the following API requests to tier data to Amazon S3 when you use Cloud Tiering.

[cols=3*,options="header"]
|===

| Action
| Used for set up?
| Used for daily operations?

| s3:CreateBucket | Yes | No
| s3:PutLifecycleConfiguration | Yes | No
| s3:GetLifecycleConfiguration | Yes | Yes
| ec2:DescribeRegions | Yes | Yes

|===

== Cloud Volumes ONTAP

The Connector makes the following API requests to deploy and manage Cloud Volumes ONTAP in AWS.

[cols=5*,options="header"]
|===

| Purpose
| Action
| Used for deployment?
| Used for daily operations?
| Used for deletion?

.13+| Create and manage IAM roles and instance profiles for Cloud Volumes ONTAP instances
| iam:ListInstanceProfiles | Yes | Yes | No
| iam:CreateRole | Yes | No | No
| iam:DeleteRole | No | Yes | Yes
| iam:PutRolePolicy | Yes | No | No
| iam:CreateInstanceProfile | Yes | No | No
| iam:DeleteRolePolicy | No | Yes | Yes
| iam:AddRoleToInstanceProfile | Yes | No | No
| iam:RemoveRoleFromInstanceProfile | No | Yes | Yes
| iam:DeleteInstanceProfile | No | Yes | Yes
| iam:PassRole | Yes | No | No
| ec2:AssociateIamInstanceProfile | Yes | Yes | No
| ec2:DescribeIamInstanceProfileAssociations | Yes | Yes | No
| ec2:DisassociateIamInstanceProfile | No | Yes | No

| Decode authorization status messages
| sts:DecodeAuthorizationMessage | Yes | Yes | No

| Describe the specified images (AMIs) available to the account
| ec2:DescribeImages | Yes | Yes | No

| Describe the route tables in a VPC (required for HA pairs only)
| ec2:DescribeRouteTables | Yes | No | No

.7+| Stop, start, and monitor instances
| ec2:StartInstances | Yes | Yes | No
| ec2:StopInstances | Yes | Yes | No
| ec2:DescribeInstances | Yes | Yes | No
| ec2:DescribeInstanceStatus | Yes | Yes | No
| ec2:RunInstances | Yes | No | No
| ec2:TerminateInstances | No | No | Yes
| ec2:ModifyInstanceAttribute | No | Yes | No

| Verify that enhanced networking is enabled for supported instance types
| ec2:DescribeInstanceAttribute | No | Yes | No

| Tag resources with the "WorkingEnvironment" and "WorkingEnvironmentId" tags which are used for maintenance and cost allocation
| ec2:CreateTags | Yes | Yes | No

.6+| Manage EBS volumes that Cloud Volumes ONTAP uses as back-end storage
| ec2:CreateVolume | Yes | Yes | No
| ec2:DescribeVolumes | Yes | Yes | Yes
| ec2:ModifyVolumeAttribute | No | Yes | Yes
| ec2:AttachVolume | Yes | Yes | No
| ec2:DeleteVolume | No | Yes | Yes
| ec2:DetachVolume  | No | Yes | Yes

.7+| Create and manage security groups for Cloud Volumes ONTAP
| ec2:CreateSecurityGroup | Yes | No | No
| ec2:DeleteSecurityGroup | No | Yes | Yes
| ec2:DescribeSecurityGroups | Yes | Yes | Yes
| ec2:RevokeSecurityGroupEgress | Yes | No | No
| ec2:AuthorizeSecurityGroupEgress | Yes | No | No
| ec2:AuthorizeSecurityGroupIngress | Yes | No | No
| ec2:RevokeSecurityGroupIngress | Yes | Yes | No

.4+| Create and manage network interfaces for Cloud Volumes ONTAP in the target subnet
| ec2:CreateNetworkInterface | Yes | No | No
| ec2:DescribeNetworkInterfaces | Yes | Yes | No
| ec2:DeleteNetworkInterface | No | Yes | Yes
| ec2:ModifyNetworkInterfaceAttribute | No | Yes | No

.2+| Get the list of destination subnets and security groups
| ec2:DescribeSubnets | Yes | Yes | No
| ec2:DescribeVpcs | Yes | Yes | No

| Get DNS servers and the default domain name for Cloud Volumes ONTAP instances
| ec2:DescribeDhcpOptions | Yes | No | No

.3+| Take snapshots of EBS volumes for Cloud Volumes ONTAP
| ec2:CreateSnapshot | Yes | Yes | No
| ec2:DeleteSnapshot | No | Yes | Yes
| ec2:DescribeSnapshots | No | Yes | No

| Capture the Cloud Volumes ONTAP console, which is attached to AutoSupport messages
| ec2:GetConsoleOutput | Yes | Yes | No

| Get the list of available key pairs
| ec2:DescribeKeyPairs | Yes | No | No

| Get the list of available AWS regions
| ec2:DescribeRegions | Yes | Yes | No

.2+| Manage tags for resources associated with Cloud Volumes ONTAP instances
| ec2:DeleteTags | No | Yes | Yes
| ec2:DescribeTags | No | Yes | No

.5+| Create and manage stacks for AWS CloudFormation templates
| cloudformation:CreateStack | Yes | No | No
| cloudformation:DeleteStack | Yes | No | No
| cloudformation:DescribeStacks | Yes | Yes | No
| cloudformation:DescribeStackEvents | Yes | No | No
| cloudformation:ValidateTemplate | Yes | No | No

.15+| Create and manage an S3 bucket that a Cloud Volumes ONTAP system uses as a capacity tier for data tiering
| s3:CreateBucket | Yes | Yes | No
| s3:DeleteBucket | No | Yes | Yes
| s3:GetLifecycleConfiguration | No | Yes | No
| s3:PutLifecycleConfiguration | No | Yes | No
| s3:PutBucketTagging | No | Yes | No
| s3:ListBucketVersions | No | Yes | No
| s3:GetBucketPolicyStatus | No | Yes | No
| s3:GetBucketPublicAccessBlock | No | Yes | No
| s3:GetBucketAcl | No | Yes | No
| s3:GetBucketPolicy | No | Yes | No
| s3:PutBucketPublicAccessBlock | No | Yes | No
| s3:GetBucketTagging | No | Yes | No
| s3:GetBucketLocation | No | Yes | No
| s3:ListAllMyBuckets | No | No | No
| s3:ListBucket | No | Yes | No

.4+| Enable data encryption of Cloud Volumes ONTAP using the AWS Key Management Service (KMS)
| kms:List* | Yes | Yes | No
| kms:ReEncrypt* | Yes | No | No
| kms:Describe* | Yes | Yes | No
| kms:CreateGrant | Yes | Yes | No

.4+| Obtain AWS cost data for Cloud Volumes ONTAP
| ce:GetReservationUtilization | No | Yes | No
| ce:GetDimensionValues | No | Yes | No
| ce:GetCostAndUsage | No | Yes | No
| ce:GetTags | No | Yes | No

.2+| Create and manage an AWS spread placement group for two HA nodes and the mediator in a single AWS Availability Zone
| ec2:CreatePlacementGroup | Yes | No | No
| ec2:DeletePlacementGroup | No | Yes | Yes

.2+| Create reports
| fsx:Describe* | No | Yes | No
| fsx:List* | No | Yes | No

.2+| Create and manage aggregates that support the Amazon EBS Elastic Volumes feature
| ec2:DescribeVolumesModifications | No | Yes | No
| ec2:ModifyVolume | No | Yes | No

|===

== Global File Cache

The Connector makes the following API requests to deploy Global File Cache instances during deployment:

* cloudformation:DescribeStacks
* cloudwatch:GetMetricStatistics
* cloudformation:ListStacks

== Kubernetes

The Connector makes the following API requests to discover and manage Amazon EKS clusters:

* ec2:DescribeRegions
* eks:ListClusters
* eks:DescribeCluster
* iam:GetInstanceProfile
