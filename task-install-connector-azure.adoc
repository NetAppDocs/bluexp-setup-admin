---
sidebar: sidebar
permalink: task-install-connector-azure.html
keywords: install connector, azure connector installation, azure connector, install connector in azure, bluexp, azure marketplace, manual install, create connector
summary: Create a Connector directly from the BlueXP web-based console, from the Azure Marketplace, or by installing the software on your own Linux host.
---

= Create a Connector in Azure
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Create a Connector directly from the BlueXP web-based console, from the Azure Marketplace, or by installing the software on your own Linux host.

// start tabbed area

[role="tabbed-block"]
====

.BlueXP
--
.Before you begin

You should have the following:

* An Azure subscription.

* A VNet and subnet in your Azure region of choice.

* Details about a proxy server, if your organization requires a proxy for all outgoing internet traffic:

** IP address
** Credentials
** HTTPS certificate

* An SSH public key, if you want to use that authentication method for the Connector virtual machine. The other option for the authentication method is to use a password. 
+
https://learn.microsoft.com/en-us/azure/virtual-machines/linux-vm-connect?tabs=Linux[Learn about connecting to a Linux VM in Azure^]

* If you don't want BlueXP to automatically create an Azure role for the Connector, then you'll need to create your own link:reference-permissions-azure.html[using the policy on this page].
+
These permissions are for the Connector instance itself. It's a different set of permissions than what you previously set up to simply deploy the Connector.

.Steps

. If you're creating your first Working Environment, click *Add Working Environment* and follow the prompts. Otherwise, click the *Connector* drop-down and select *Add Connector*.
+
image:screenshot_connector_add.gif[A screenshot that shows the Connector icon in the header and the Add Connector action.]

. Choose *Microsoft Azure* as your cloud provider.

. On the *Deploying a Connector* page:

.. Under *Authentication*, select the authentication option that matches how you set up Azure permissions:
+
* Select *Azure user account* to log in to your Microsoft account, which should have the required permissions.
+
The form is owned and hosted by Microsoft. Your credentials are not provided to NetApp.
+
TIP: If you're already logged in to an Azure account, then BlueXP will automatically use that account. If you have multiple accounts, then you might need to log out first to ensure that you're using the right account.

* Select *Active Directory service principal* to enter information about the Azure Active Directory service principal that grants the required permissions:
+
** Application (client) ID
** Directory (tenant) ID
** Client Secret

+
link:task-set-up-permissions-azure.html[Learn how to obtain these values for a service principal].

. Follow the steps in the wizard to create the Connector:

* *VM Authentication*: Choose an Azure subscription, a location, a new resource group or an existing resource group, and then choose an authentication method for the Connector virtual machine that you're creating.
+
The authentication method for the virtual machine can be a password or an SSH public key.
+
https://learn.microsoft.com/en-us/azure/virtual-machines/linux-vm-connect?tabs=Linux[Learn about connecting to a Linux VM in Azure^]

* *Details*: Enter a name for the instance, specify tags, and choose whether you want BlueXP to create a new role that has the required permissions, or if you want to select an existing role that you set up with link:reference-permissions-azure.html[the required permissions].
+
Note that you can choose the Azure subscriptions associated with this role. Each subscription that you choose provides the Connector permissions to manage resources in that subscription (for example, Cloud Volumes ONTAP).

* *Network*: Choose a VNet and subnet, whether to enable a public IP address, and optionally specify a proxy configuration.

* *Security Group*: Choose whether to create a new security group or whether to select an existing security group that allows the required inbound and outbound rules.
+
link:reference-ports-azure.html[View security group rules for Azure].

* *Review*: Review your selections to verify that your set up is correct.

. Click *Add*.
+
The virtual machine should be ready in about 7 minutes. You should stay on the page until the process is complete.

.Result

After the process is complete, the Connector is available for use from BlueXP.
--

.Azure Marketplace
--
.Steps

. Go to the NetApp Connector VM page in the Azure Marketplace.
+
https://azuremarketplace.microsoft.com/en-us/marketplace/apps/netapp.netapp-oncommand-cloud-manager[Azure Marketplace page for commercial regions^]

. Click *Get it now* and then click *Continue*.

. From the Azure portal, click *Create* and follow the steps to configure the virtual machine.
+
Note the following as you configure the VM:

* *VM size*: Choose a VM size that meets CPU and RAM requirements. We recommend DS3 v2.

* *Disks*: The Connector can perform optimally with either HDD or SSD disks.

* *Network security group*: The Connector requires inbound connections using SSH, HTTP, and HTTPS.
+
link:reference-ports-azure.html[View security group rules for Azure].

* *Identity*: Under *Management*, select *Enable system assigned managed identity*.
+
This setting is important because a managed identity allows the Connector virtual machine to identify itself to Azure Active Directory without providing any credentials. https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview[Learn more about managed identities for Azure resources^].

. On the *Review + create* page, review your selections and click *Create* to start the deployment.
+
Azure deploys the virtual machine with the specified settings. The virtual machine and Connector software should be running in approximately five minutes.

. Open a web browser from a host that has a connection to the Connector virtual machine and enter the following URL:
+
https://_ipaddress_

. After you log in, set up the Connector:
.. Specify the BlueXP account to associate with the Connector.
.. Enter a name for the system.
.. Under *Are you running in a secured environment?* keep restricted mode disabled.
+
You should keep restricted mode disabled because these steps describe how to use BlueXP in standard mode. You should enable restricted mode only if you have a secure environment and want to disconnect this account from BlueXP backend services. If that's the case, link:task-quick-start-restricted-mode.html[follow steps to get started with BlueXP in restricted mode].
.. Click *Let's start*.

The Connector is now installed and is set up with your BlueXP account.

.What's next?

link:task-provide-permissions-azure.html[Provide BlueXP with the permissions that you previously setup].
--

.Manual install
--
include::_include/manual-install.adoc[tag=before]

* A managed identity enabled on the VM in Azure so that you can provide the required Azure permissions through a custom role.
+
https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm[Microsoft Azure documentation: Configure managed identities for Azure resources on a VM using the Azure portal^]

include::_include/manual-install.adoc[tag=about]

include::_include/manual-install.adoc[tag=main-steps]

include::_include/manual-install.adoc[tag=standard-mode-steps-for-cloud]

.What's next?

link:task-provide-permissions-azure.html[Provide BlueXP with the permissions that you previously setup].
--

====

// end tabbed area